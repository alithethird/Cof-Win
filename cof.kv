#:kivy 2.0.0
<ScreenOne>:
    FloatLayout:
        size: root.width, root.height


        Image:
            source: "mini_logo.png"
            pos_hint: {"center_x": 0.5, "center_y": 0.88}
            #pos: 100, 100

        Label:
            id: first_sample_header
            text: "Test Sample"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.2, "center_y": 0.7}


        Label:
            id: second_sample_header
            text: "Second Sample"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.8, "center_y": 0.7}

        Button:
            text: "Motorized Test"
            pos_hint: {'center_x': 0.4, "center_y": 0.1}
            size_hint: (1/6, 1/12)
            on_press:
                root.select_motorized_test()
                root.btn_text()
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_two"
        Button:
            text: "Angle Test"
            pos_hint: {'center_x': 0.6, "center_y": 0.1}
            size_hint: (1/6, 1/12)
            on_press:
                root.select_angle_test()
                root.btn_text()
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_four"
        Button:
            text: "Calibration"
            pos_hint: {'center_x': 0.6, "center_y": 0.3}
            size_hint: (1/6, 1/12)
            on_press:
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_five"
        TextInput:
            write_tab: False
            multiline: False
            id: first_name
            hint_text: 'Name'
            pos_hint: {'center_x': 0.2, "center_y": 0.65}
            size_hint: 0.2, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: first_width
            hint_text: 'Width(mm)'
            pos_hint: {'center_x': 0.2, "center_y": 0.58}
            size_hint: 0.2, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: first_height
            hint_text: 'Height(mm)'
            pos_hint: {'center_x': 0.2, "center_y": 0.51}
            size_hint: 0.2, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: first_age
            hint_text: 'Age(months)'
            pos_hint: {'center_x': 0.2, "center_y": 0.44}
            size_hint: 0.2, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: second_name
            hint_text: 'Name'
            pos_hint: {'center_x': 0.8, "center_y": 0.65}
            size_hint: (0.2, 0.06)  if switch.active else (0,0)

        TextInput:
            write_tab: False
            multiline: False
            id: second_width
            hint_text: 'Width(mm)'
            pos_hint: {'center_x': 0.8, "center_y": 0.58}
            size_hint: (0.2, 0.06)  if switch.active else (0,0)

        TextInput:
            write_tab: False
            multiline: False
            id: second_height
            hint_text: 'Height(mm)'
            pos_hint: {'center_x': 0.8, "center_y": 0.51}
            size_hint: (0.2, 0.06)  if switch.active else (0,0)

        TextInput:
            write_tab: False
            multiline: False
            id: second_age
            hint_text: 'Age(months)'
            pos_hint: {'center_x': 0.8, "center_y": 0.44}
            size_hint: (0.2, 0.06)  if switch.active else (0,0)

        TextInput:
            write_tab: False
            multiline: False
            id: company_name
            hint_text: 'Company Name'
            pos_hint: {'center_x': 0.5, "center_y": 0.65}
            size_hint: (0.2, 0.06)

        TextInput:
            write_tab: False
            multiline: False
            id: operator_name
            hint_text: 'Operator Name'
            pos_hint: {'center_x': 0.5, "center_y": 0.58}
            size_hint: (0.2, 0.06)

        Switch:
            id: switch
            pos_hint: {'center_x': 0.8, "center_y": 0.35}
            size_hint: 0.2, 0.06


<ScreenTwo>:
    FloatLayout:
        size: root.width, root.height

        Graph:
            id: graph
            max: 1000
            xlabel: "Time (seconds)"
            ylabel: "Force (mN)"
            x_ticks_minor:1
            y_ticks_minor:10
            y_grid_label:True
            x_grid_label:True
            padding:5
            x_grid:True
            y_grid:True
            xmin:0
            xmax:1
            ymin:0
            ymax:1
            pos: 0, 0
            size_hint_y: 0.8
            size_hint_x: 0.98
            border_color: (0,0,0,1)
            tick_color: (169/255,169/255,169/255,1)
            label_options: {'color': (0,0,0,1), "bold": True}


        Button:
            text: "Start the test"
            pos_hint: {'center_x': 0.08, "center_y": 0.88}
            size_hint: (1/8, 1/16)
            on_press: root.start()

        Button:
            text: "Stop the test"
            pos_hint: {'center_x': 0.22, "center_y": 0.88}
            size_hint: (1/8, 1/16)
            on_press: root.stop()
        Button:
            text: "Reset Position"
            pos_hint: {'center_x': 0.36, "center_y": 0.88}
            size_hint: (1/8, 1/16)
            on_press: root.reset()
        Button:
            text: "Go back"
            pos_hint: {'center_x': 0.5, "center_y": 0.84}
            size_hint: (1/8, 1/16)
            on_press:
                root.manager.transition.direction = "right"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_one"
        Button:
            id: btn
            text: "Results"
            pos_hint: {'center_x': 0.5, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press:
                root.save_graph()
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_three"

        Button:
            text: "Forward"
            pos_hint: {'center_x': 0.64, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press:
                root.motor_forward()

        Button:
            text: "Backward"
            pos_hint: {'center_x': 0.64, "center_y": 0.84}
            size_hint: (1/8, 1/16)
            on_press:
                root.motor_backward()





<ScreenThree>:
    FloatLayout:
        size: root.width, root.height

        Button:
            text: "Calculate Results"
            pos_hint: {'center_x': 0.2, 'center_y': 0.2}
            size_hint: (1/5,1/16)
            on_press: root.update_results()
        Button:
            text: "Create Results PDF"
            pos_hint: {'center_x': 0.8, "center_y": 0.2}
            size_hint: (1/5, 1/16)
            on_press: root.createPDF()

        Button:
            text: "Go back"
            pos_hint: {'center_x': 0.8, "center_y": 0.1}
            size_hint: (1/8, 1/16)
            on_press:
                root.manager.transition.direction = "right"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_two"

        Label:
            id: label_static_cof
            text: "Static Coefficient of friction: "
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.19, "center_y": 0.7}
            halign: "left"
            

        Label:
            id: label_dynamic_cof
            text: "Dynamic Coefficient of friction:"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.2, "center_y": 0.5}
            halign: "left"
            


        Label:
            text: "Date: "
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.1, "center_y": 0.1}
            halign: "left"
            

        Label:
            id: label_date
            text: root.date_text
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.18, "center_y": 0.1}
            halign: "left"
            
<ScreenFour>:
    FloatLayout:
        size: root.width, root.height

        Graph:
            id: graph
            max: 1000
            xlabel: "Angle (degrees)"
            ylabel: "Force (mN)"
            #x_ticks_minor:10
            y_ticks_minor:10
            y_grid_label:True
            x_grid_label:True
            padding:2
            x_grid:False
            y_grid:False
            xmin:0
            xmax:1
            ymin:0
            ymax:1
            pos: 0, 0
            size_hint_y: 0.8
            size_hint_x: 0.98
            border_color: (0,0,0,1)
            tick_color: (1,0,0,1)
            label_options: {'color': (0,0,0,1), "bold": True}


        Button:
            text: "Start the test"
            pos_hint: {'center_x': 0.08, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press: root.start()

        Button:
            text: "Stop the test"
            pos_hint: {'center_x': 0.22, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press: root.stop()

        Button:
            text: "Reset Position"
            pos_hint: {'center_x': 0.36, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press: root.reset()

        Button:
            text: "Go back"
            pos_hint: {'center_x': 0.5, "center_y": 0.84}
            size_hint: (1/8, 1/16)
            on_press:
                root.manager.transition.direction = "right"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_one"
        Button:
            id: btn
            text: "Results"
            pos_hint: {'center_x': 0.5, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press:
                root.save_graph()
                root.manager.transition.direction = "left"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_three"

        Button:
            text: "Forward"
            pos_hint: {'center_x': 0.64, "center_y": 0.92}
            size_hint: (1/8, 1/16)
            on_press:
                root.angle_motor_rise()

        Button:
            text: "Backward"
            pos_hint: {'center_x': 0.64, "center_y": 0.84}
            size_hint: (1/8, 1/16)
            on_press:
                root.angle_motor_fall()

<ScreenFive>:
    FloatLayout:
        size: root.width, root.height

        Button:
            text: "Go back"
            pos_hint: {'center_x': 0.7, "center_y": 0.1}
            size_hint: (1/8, 1/16)
            on_press:
                root.clean_errors()
                root.manager.transition.direction = "right"
                root.manager.transition.duration = 0.5
                root.manager.current = "screen_one"

        Button:
            text: "Save"
            pos_hint: {'center_x': 0.86, "center_y": 0.1}
            size_hint: (1/8, 1/16)
            on_press:
                root.save()

        Button:
            text: "Save to Factory Settings"
            pos_hint: {'center_x': 0.86, "center_y": 0.4}
            size_hint: (1/4, 1/16)
            on_press:
                root.save_for_good()
        TextInput:
            write_tab: False
            multiline: False
            id: speed_text
            hint_text: 'Speed(mm/min)'
            pos_hint: {'center_x': 0.1, "center_y": 0.92}
            font_size:12
            size_hint: 1/7, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: distance_text
            hint_text: 'Distance(mm)'
            pos_hint: {'center_x': 0.25, "center_y": 0.92}
            font_size: 12
            size_hint: 1/7, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: normal_force_text
            hint_text: 'Normal Force(N)'
            pos_hint: {'center_x': 0.1, "center_y": 0.84}
            font_size: 12
            size_hint: 1/7, 0.06

        TextInput:
            write_tab: False
            multiline: False
            id: sample_time_text
            hint_text: 'Sample time (ms)'
            pos_hint: {'center_x': 0.25, "center_y": 0.84}
            font_size: 12
            size_hint: 1/7, 0.06

        Label:
            id: distance_label
            text: "Test Distance:"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.4, "center_y": 0.92}
            halign: "left"
        Label:
            id: speed_label
            text: "Test Speed:"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.4, "center_y": 0.84}
            halign: "left"
        Label:
            id: normal_force_label
            text: "Normal Force:"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.6, "center_y": 0.92}
            halign: "left"
        Label:
            id: sample_time_label
            text: "Sample Time:"
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.6, "center_y": 0.84}
            halign: "left"

        Label:
            id: distance
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.5, "center_y": 0.92}
            halign: "left"
        Label:
            id: speed
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.5, "center_y": 0.84}
            halign: "left"
        Label:
            id: normal_force
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.7, "center_y": 0.92}
            halign: "left"
        Label:
            id: sample_time
            color: (0,0,0,1)
            pos_hint: {"center_x": 0.7, "center_y": 0.84}
            halign: "left"